/**************************/
/*** waybetter ************/
/*** by Ron Marcelle ******/
/*** Licensed under MIT ***/
/**************************/
/* debounce function taken pretty */
/* direcly from underscore.js...thanks. */

!function(t){"use strict";var e="waybetter",n=function(t,e){return e&&"function"!=typeof e&&"object"!=typeof e?s[e]?s[e].apply(t,Array.prototype.slice.call(arguments,2)):void 0:c.apply(t,Array.prototype.slice.call(arguments,1))},i=function(t){if("undefined"!=typeof Event)return new Event(e+"."+t);var n=document.createEvent(e+".refreshed");return n.initEvent("custom",!0,!0),n},r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},s={destroy:function(){return(this.length?this:[this]).forEach(function(t){var r=n.elements.indexOf(t);r>-1&&(n.elements.splice(r,1),t[e].inview=!1,t.removeAttribute("data-"+e),t.dispatchEvent(i("inview")))})},enable:function(){c.apply(this),this.dispatchEvent(i("enabled"))},inview:function(){return u.apply(this)},refresh:function(){return this.dispatchEvent(i("refresh")),l.apply(this)}},o=function(t,e,n){var i;return function(){var r=this,s=arguments,o=function(){i=null,n||t.apply(r,s)},c=n&&!i;clearTimeout(i),i=setTimeout(o,e),c&&t.apply(r,s)}},c=function(i){n.settings=r(n.settings,i);var s=this.length?this:[this];return s.forEach(function(t){t[e]={}}),n.elements?s.each(function(){-1===n.elements.indexOf(s)&&n.elements.push(s)}):(n.elements=s.slice(0,this.length),["scroll","resize"].forEach(function(e){t.addEventListener(e,o(function(){l.apply(n.elements)},n.settings.debounce))})),l.apply(n.elements)},a=function(t,e,n){return t>e&&n>t},u=function(){var t=n.settings.direction,e=n.settings.threshold,i=n.settings.viewport;if("vertical"===t)var r=this.offsetTop,s=this.clientHeight,o=i.scrollTop,c=i.clientHeight;else var r=this.offsetLeft,s=this.clientWidth,o=i.scrollLeft,c=i.clientWidth;var u=o-r;return a(u,e-c,s-e)},l=function(){return this.forEach(function(t){var r=(n.settings,u.apply(t)),s=t[e],o=s&&s.inview,c=r&&!o,a=!r&&o;(c||a)&&(c?(t[e].inview=!0,t.setAttribute("data-"+e,""),t.dispatchEvent(i("inview"))):a&&(t[e].inview=!1,t.removeAttribute("data-"+e),t.dispatchEvent(i("outview"))))})};n.elements="",n.settings={debounce:0,direction:"vertical",threshold:0,viewport:document.body},n(document.querySelector("[data-"+e+"-watch]"))}(window);
