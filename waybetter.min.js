/**************************/
/*** waybetter ************/
/*** by Ron Marcelle ******/
/*** Licensed under MIT ***/
/**************************/
/* debounce function taken pretty */
/* direcly from underscore.js...thanks. */

!function(e){"use strict";var t="waybetter",n=function(e,t){return new i(e,t)},i=function(){var i=this;return i.elements=arguments[0].length?arguments[0]:Array.prototype.slice.call(arguments,0,1),i.elements.forEach(function(e){e[t]={}}),i.settings=r({debounce:0,direction:"vertical",threshold:0,viewport:e},arguments[1]||{}),i.callback=c(function(){s.apply(i)},i.settings.debounce),n.elements.length||["scroll","resize"].forEach(function(t){e.addEventListener(t,i.callback)}),i.elements.forEach(function(e){-1===n.elements.indexOf(e)&&n.elements.push(e)}),i.destroy=function(){return i.elements.forEach(function(e){e[t].inview=!1,e.removeAttribute("data-"+t),e.dispatchEvent(new Event("inview"));var r=n.elements.indexOf(el);r>-1&&n.elements.splice(r,1),i.callbacks.forEach(function(n){e.removeEventListener(t+"."+inout+"view",n)})}),i.elements=[],n.elements.length||["scroll","resize"].forEach(function(t){e.removeEventListener(t,i.callback)}),i},i.inview=function(){return a.apply(this)},i.refresh=function(){return this.dispatchEvent(new Event("refresh")),s.apply(i)},i.on=function(e,n){return i.callbacks=i.callbacks?i.callbacks:[],i.callbacks.push({inout:e,callback:n}),i.elements.forEach(function(i){i.addEventListener(t+"."+e+"view",n)}),i},s.apply(i)},r=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},c=function(e,t,n){var i;return function(){var r=this,c=arguments,a=function(){i=null,n||e.apply(r,c)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(r,c)}},a=function(e){if(!(e.length<1)){var t=this.settings.threshold,n=this.settings.viewport,i=e.getBoundingClientRect();return"vertical"===this.settings.direction?i.bottom+t>=0&&i.top+t<=(n.innerHeight||n.clientHeight):i.right+t>=0&&i.left+t<=(n.innerWidth||n.clientWidth)}},s=function(){var e=this;return n.elements.forEach(function(n){var i=(e.settings,a.call(e,n)),r=n[t],c=r&&r.inview,s=i&&!c,l=!i&&c;(s||l)&&(s?(n[t].inview=!0,n.setAttribute("data-"+t,""),n.dispatchEvent(new Event("inview"))):l&&(n[t].inview=!1,n.removeAttribute("data-"+t),n.dispatchEvent(new Event("outview"))))}),e};n.elements=[];var l=document.querySelectorAll("[data-"+t+"-watch]");l.length&&n(l,{direction:"vertical"}),e.waybetter=n}(window);