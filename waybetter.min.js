(function(e,t){"use strict";var n="waybetter",r={destroy:function(){return this.each(function(){var e=t.inArray(this,t.fn.waybetter.elements);if(e>-1){t.fn.waybetter.elements.splice(e,1);t(this).data(n,{inview:false}).removeAttr("data-"+n).trigger(n+".destroyed")}})},enable:function(){this.waybetter().trigger(n+".enabled")},inview:function(){return o.apply(this)},refresh:function(){this.trigger(n+".refreshed");return u.apply(this)}},i=function(r){t.fn.waybetter.settings=t.extend(t.fn.waybetter.settings,r);if(!t.fn.waybetter.elements){t.fn.waybetter.elements=this.slice(0,this.length);t(e).on("scroll."+n+" "+"resize."+n,function(){u.apply(t(t.fn.waybetter.elements))})}else{this.each(function(){if(t.inArray(this,t.fn.waybetter.elements)===-1){t.fn.waybetter.elements.push(this)}})}return u.apply(t.fn.waybetter.elements)},s=function(e,t,n){return t<e&&e<n},o=function(){var e=t.fn.waybetter.settings.direction,n=t.fn.waybetter.settings.threshold,r=t(t.fn.waybetter.settings.viewport),i=this.offset();if(e==="vertical"){var o=i.top,u=this.outerHeight(),a=r.scrollTop(),f=r.outerHeight()}else{var o=i.left,u=this.outerWidth(),a=r.scrollLeft(),f=r.outerWidth()}var l=a-o;return s(l,n-f,u-n)},u=function(){return this.each(function(){var e=t(this),r=t.fn.waybetter.settings,i=o.apply(e),s=e.data(n),u=s&&s.inview,a=i&&!u,f=!i&&u;if(a||f){if(a){e.data(n,{inview:true}).attr("data-"+n,true).trigger(n+".inview")}else if(f){e.data(n,{inview:false}).removeAttr("data-"+n).trigger(n+".outview")}}})};t.fn.waybetter=function(e){if(!e||t.isFunction(e)||t.isPlainObject(e)){return i.apply(this,arguments)}else if(r[e]){return r[e].apply(this,Array.prototype.slice.call(arguments,1))}else{t.error("Method "+e+" does not exist on Waybetter")}};t.fn.waybetter.elements;t.fn.waybetter.settings={direction:"vertical",threshold:0,viewport:e}})(window,jQuery)