/**************************/
/*** waybetter ************/
/*** by Ron Marcelle ******/
/*** Licensed under MIT ***/
/**************************/
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var e=function(){function e(n){var r=this,o=arguments.length<=1||void 0===arguments[1]?0:arguments[1];_classCallCheck(this,e),this.els=Array.isArray(n)?n:[n],this.threshold=o,this.viewport=t,["scroll","resize"].forEach(function(t){return r.viewport.addEventListener(t,function(){return r._process()})})}return e.prototype.refresh=function(){this._process()},e.prototype._createEvent=function(t){var e=void 0;try{e=new Event("waybetter."+t+"view",{bubbles:!0})}catch(n){e=document.createEvent("Event"),e.initEvent("waybetter."+t+"view",!0,!0)}return e},e.prototype._isInView=function(t){var e=t.getBoundingClientRect();return e.bottom+this.threshold>=0&&e.top+this.threshold<=this.viewport.innerHeight&&e.right+this.threshold>=0&&e.left+this.threshold<=this.viewport.innerWidth},e.prototype._process=function(){var t=this;this.els.forEach(function(e){var n=t._isInView(e);(n&&!e.inview||!n&&e.inview)&&(e.inview=n,n?e.setAttribute("data-waybetter",""):e.removeAttribute("data-waybetter"),requestAnimationFrame(function(){return e.dispatchEvent(t._createEvent(n?"in":"out"))}))})},e}(),n=Array.from(document.querySelectorAll("[data-waybetter-watch]"));n.length&&new e(n),"function"==typeof define&&"object"===_typeof(define.amd)&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.Waybetter=e):t.Waybetter=e}(window);